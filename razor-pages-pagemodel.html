<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ASP.NET Core Razor简介 | 了解 Razor Pages</title>
    <link href="./assets/libs/bootstrap-4.4.1-dist/css/bootstrap.css" rel="stylesheet" />
    <link href="./assets/theme.css" rel="stylesheet" />
    <script>
        window.onload = function () {
            $("body").addClass("bg-light");
        }
    </script>
</head>
<body id="top">
    <nav class="navbar navbar-vertical fixed-left navbar-expand-md " id="sidebar">
        <div class="container-fluid">
            <!-- Toggler -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#sidebarCollapse" aria-controls="sidebarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Brand -->
            <div data-toggle="tooltip" data-placement="right" data-template='<div class="tooltip d-none d-md-block" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>' title="了解 Razor Pages">
                <a class="navbar-brand" href="./index.html"><span class="text-center d-md-block">了解 Razor Pages</span></a>
            </div>
            <!-- Collapse -->
            <div class="collapse navbar-collapse" id="sidebarCollapse">
                <!-- Divider -->
                <hr class="navbar-divider d-none d-md-block mt-0 my-3">
                <!-- Navigation -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarIndex" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarIndex">主页</a>
                        <div class="collapse" id="sidebarIndex">
                            <ul class="nav nav-sm flex-column">
                                <li class="nav-item">
                                    <a class="nav-link" href="./fristlook.html">初试</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="./Aspnetcore.html">ASP.NET Core</a></li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarTutorials" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarTutorials">讲解</a>
                        <div class="collapse" id="sidebarTutorials">
                            <ul class="nav nav-sm flex-column">
                                <li class="nav-item">
                                    <a class="nav-link" href="./bakery.html">面包店</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarRazorpages" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarRazorpages">Razor 页面文件</a>
                        <div class="collapse" id="sidebarRazorpages">
                            <ul class="nav nav-sm flex-column">
                                <li class="nav-item"><a class="nav-link" href="./razor-pages.html">Razor 页面文件</a></li>
                                <li class="nav-item"><a class="nav-link" href="./razor-pages-files.html">Razor 文件</a></li>
                                <li class="nav-item"><a class="nav-link" href="./razor-pages-partial-pages.html">部分页</a></li>
                                <li class="nav-item"><a class="nav-link" href="./razor-pages-files-layout.html">布局</a></li>
                                <li class="nav-item"><a class="nav-link" href="./razor-pages-files-viewimports.html">ViewImports</a></li>
                                <li class="nav-item"><a class="nav-link" href="./razor-pages-files-viewstart.html">ViewStart</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="./razor-syntax.html">Razor 语法</a></li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarPagemodel" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarPagemodel">Page Models</a>
                        <div class="collapse" id="sidebarPagemodel">
                            <ul class="nav nav-sm flex-column">
                                <li class="nav-item"><a class="nav-link" href="./razor-pages-pagemodel.html">Page Models</a></li>
                                <li class="nav-item"><a class="nav-link" href="./razor-pages-handler-methods.html">Handler 方法</a></li>
                                <li class="nav-item"><a class="nav-link" href="./razor-pages-viewdata.html">ViewData</a></li>
                                <li class="nav-item"><a class="nav-link" href="./razor-pages-action-results.html">结果返回</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarTaghelpers" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarTaghelpers">标签助手</a>
                        <div class="collapse" id="sidebarTaghelpers">
                            <ul class="nav nav-sm flex-column">
                                <li><a class="nav-link" href="./razor-pages-tag-helpers.html">标签助手</a></li><li><a class="nav-link" href="#">Anchor Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Cache Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Distributed Cache Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Environment Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Form Action Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Form Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Image Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Input Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Label Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Link Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Option Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Partial Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Script Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Select Tag Helper</a></li>
                                <li><a class="nav-link" href="#">TextArea Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Validation Tag Helper</a></li>
                                <li><a class="nav-link" href="#">Validation Summary Tag Helper</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#">View Components</a></li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarRouting" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarRouting">Routing and URLs</a>
                        <div class="collapse" id="sidebarRouting">
                            <ul class="nav nav-sm flex-column">
                                <li class="nav-item"><a class="nav-link" href="#">Routing and URLs</a></li>
                                <li class="nav-item"><a class="nav-link" href="#">Customising Route Conventions</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#">Startup</a></li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarConfiguration" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarConfiguration">Configuration</a>
                        <div class="collapse" id="sidebarConfiguration">
                            <ul class="nav nav-sm flex-column">
                                <li><a class="nav-link" href="#">Configuration</a></li>
                                <li><a class="nav-link" href="#">Global Error Handling And Logging</a></li>
                                <li><a class="nav-link" href="#">Custom Error Pages</a></li>
                                <li><a class="nav-link" href="#">Configuring HTTPS</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#">Middleware</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Dependency Injection</a></li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarForms" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarForms">Working With Forms</a>
                        <div class="collapse" id="sidebarForms">
                            <ul class="nav nav-sm flex-column">
                                <li><a class="nav-link" href="#">Working With Forms</a></li>
                                <li><a class="nav-link" href="#">Uploading Files in Razor Pages</a></li>
                                <li><a class="nav-link" href="#">Working With Checkboxes</a></li>
                                <li><a class="nav-link" href="#">Select Lists in a Razor Pages Form</a></li>
                                <li><a class="nav-link" href="#">Working With Radio Buttons</a></li>
                                <li><a class="nav-link" href="#">Request Verification</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarValidation" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarValidation">Validation</a>
                        <div class="collapse" id="sidebarValidation">
                            <ul class="nav nav-sm flex-column">
                                <li><a class="nav-link" href="#">Validation</a></li>
                                <li><a class="nav-link" href="#">Remote Validation</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#">Model Binding</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">State Management</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Caching</a></li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarIdentity" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarIdentity">Managing Security With ASP.NET Identity</a>
                        <div class="collapse" id="sidebarIdentity">
                            <ul class="nav nav-sm flex-column">
                                <li><a class="nav-link" href="#">Identity</a></li>
                                <li><a class="nav-link" href="#">Customising Identity</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarAjax" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarAjax">使用 AJAX</a>
                        <div class="collapse" id="sidebarAjax">
                            <ul class="nav nav-sm flex-column">
                                <li><a class="nav-link" href="#">AJAX</a></li>
                                <li><a class="nav-link" href="#">Posting Forms</a></li>
                                <li><a class="nav-link" href="#">Partial Page Updates</a></li>
                                <li><a class="nav-link" href="#">Cascading Dropdowns</a></li>
                                <li><a class="nav-link" href="#">Uploading Files</a></li>
                                <li><a class="nav-link" href="#">Unobtrusive AJAX</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#">Working with JSON</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Scaffolding</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">Publishing To IIS</a></li>
                    <li class="nav-item">
                        <a class="nav-link" href="#sidebarAdvanced" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="sidebarAdvanced">Advanced</a>
                        <div class="collapse" id="sidebarAdvanced">
                            <ul class="nav nav-sm flex-column">
                                <li><a class="nav-link" href="#">Advanced</a></li>
                                <li><a class="nav-link" href="#">Areas</a></li>
                                <li><a class="nav-link" href="#">Custom Tag Helpers</a></li>
                                <li><a class="nav-link" href="#">Customising Route Conventions</a></li>
                                <li><a class="nav-link" href="#">Custom Route Constraints</a></li>
                                <li><a class="nav-link" href="#">Parameter Transformers For Routes</a></li>
                                <li><a class="nav-link" href="#">Dependency Injection</a></li>
                                <li><a class="nav-link" href="#">Filters</a></li>
                                <li><a class="nav-link" href="#">Razor Class Libraries</a></li>
                                <li><a class="nav-link" href="#">Rendering A Partial View To A String</a></li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="#">Table Of Contents</a></li>
                </ul>
                <!-- Push content down -->
                <div class="mt-auto"></div>
            </div>
            <!-- /Navbar-collapse -->
        </div>
    </nav>
    <nav class="navbar navbar-vertical navbar-vertical-sm fixed-left navbar-expand-md " id="sidebarSmall"></nav>

    <div class="main-content">
        <nav class="navbar navbar-expand-md navbar-light d-none d-md-flex" id="topbar">
            <div class="container-fluid">
                <!-- Title -->
                <div class="input-group input-group-flush input-group-merge">
                    <div class="input-group-prepend">
                        <div class="input-group-text"></div><a id="tn">ASP.NET Core Razor技术指南</a>
                    </div>
                </div>
            </div>
        </nav>
        <div class="header bg-light pb-5">
            <div class="container-fluid">
                <!-- List -->
                <div class="row justify-content-center">
                    <div class="col-12 col-lg-12 col-xl-12">
                        <!-- Header -->
                        <div class="header header-sm mt-md-0">
                            <div class="header-body header-body-sm">
                                <div class="row align-items-center">
                                    <div class="col">
                                        <!-- Pretitle -->
                                        <h6 class="header-pretitle"></h6>
                                        <!-- Title -->
                                        <h4 class="header-title"><strong>Page Models</strong></h4>
                                    </div>
                                </div>
                                <!-- /Row -->
                            </div>
                        </div>
                        <!-- /Header -->
                        <!-- ListContent -->
                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-9">
                                        <div id="article">
                                            <h1 itemprop="headline" id="the-razor-pages-pagemodel">Razor 页面 PageModel</h1>
                                            <div itemprop="articleBody">
                                                <p>Razor 页面 PageModel 类的主要目的是在 UI 层（.cshtml <em>view</em> 文件）和页面的处理逻辑之间提供清晰的分离。 这种分离的优点在于： </p>
                                                <ul>
                                                    <li>它降低了 UI 层的复杂性，使其更易于维护。</li>
                                                    <li>它有助于自动化单元测试。</li>
                                                    <li>它为团队提供了更大的灵活性，因为一个成员可以在视图上工作，而另一个成员可以在处理逻辑上工作。 </li>
                                                    <li>它鼓励用于特定目的的更小、可重用的代码单元，这有助于维护和可扩展性（即可以轻松添加应用程序的代码库以满足未来的额外需求）。</li>
                                                </ul>
                                                <p>当您在添加新项目时选择 Razor 页面（带页面模型）选项时，将创建 PageModel 类： </p>
                                                <p><img src="./assets/img/13-07-2017-08-19-45.png" class="img-fluid" alt="Razor Page with page model"></p>
                                                <p>
                                                    PageModel 类在一个单独的类文件中声明 - 一个带有 <em>.cs</em> 扩展名的文件。
                                                    PageModel 类放置在与页面相同的命名空间中，默认情况下遵循模式 <code>&lt;default namespace&gt;.&lt;root folder name&gt;</code> 并以页面文件命名，“PageModel”为 一个后缀。
                                                    <em>About.cshtml</em> 的 PageModel 类将被命名为 <code>AboutPageModel</code>，并将在名为 <em>About.cshtml.cs</em> 的文件中生成。
                                                </p>
                                                <p>就其特性和功能而言，PageModel 类是 <em>控制器（Controllers）</em> 和 <em>视图模型</em> 的组合。</p>
                                                <h2 id="controllers">控制器 （Controllers）</h2>
                                                <p>
                                                    控制器 （Controllers）在与应用程序的表示层相关的许多设计和架构模式中具有特色。
                                                    它们最常见于模型-视图-控制器 (MVC) 模式，其中控制器可以实现为<em>前控制器</em>或<em>页面控制器</em>。
                                                    <a href="https://martinfowler.com/eaaCatalog/frontController.html">前端控制器定义</a> 为“处理网站所有请求的控制器”。
                                                    在 ASP.NET MVC 实现中，前端控制器通常处理对由控制器名称的第一部分表示的网站中功能区域的所有请求。
                                                    例如，<code>ProductController</code> 将处理与 Product 实体或功能相关的所有请求。
                                                    <a href="https://martinfowler.com/eaaCatalog/pageController.html">页面控制器</a>是“处理对特定页面或网站操作的请求的对象”。
                                                    Razor PageModel 类是页面控制器模式的实现。
                                                </p>
                                                <p>
                                                    页面控制器模式的特点是页面与其控制器之间存在一对一的映射关系。
                                                    页面控制器模式中控制器的作用是接受来自页面请求的输入，以确保应用对模型（数据）的任何请求操作，然后确定用于结果页面的正确视图。
                                                </p>
                                                <h2 id="view-models">视图模型</h2>
                                                <p>
                                                    视图模型是表示模型设计模式的实现。 它是一个自包含的类，表示特定“视图”或页面的数据和行为。
                                                    视图模型模式广泛用于 MVC 应用程序开发，它主要表示数据，但通常很少有行为。 在 Razor Pages 中，PageModel 也是视图模型。
                                                </p>
                                                <p>
                                                    Razor Pages 有时被描述为实现 <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel">MVVM（模型、视图视图模型）</a> 模式。
                                                    并不是。 MVVM 模式应用于表示和模型共享同一层的应用程序。
                                                    它在 WPF、移动应用程序开发和一些 JavaScript 库中很流行。 MVVM 的一个主要特性是视图会自动更新以反映对底层模型的更改。
                                                    这个过程通常由双向绑定和观察者模式的实现控制。在服务器端 Web 应用程序中，模型驻留在服务器上，而视图在客户端上。
                                                    您需要实现额外的复杂层，以在这种分布式架构中实现类似于观察者模式的任何内容。
                                                </p>
                                                <h2 id="default-template">默认模板</h2>
                                                <p>以下代码显示了当您使用 Razor Page（带页面模型）选项向 Razor Pages 应用程序添加新页面时为每个文件生成的内容：</p>
                                                <p>(Index.cshtml)</p>
<pre><code class="language-html">@page
@model IndexModel
@{
}
</code></pre>
                                                <p>(Index.cshtml.cs)</p>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Microsoft.AspNetCore.Mvc;
using Microsoft.AspNetCore.Mvc.RazorPages;

namespace LearnRazorPages.Pages
{
    public class IndexModel : PageModel
    {
        public void OnGet()
        {
        }
    }
}
</code></pre>
                                                <p>
                                                    PageModel 类通过 <code>@model</code> 指令可用于视图文件。
                                                    生成的 PageModel 类继承自 <code>Microsoft.AspNetCore.Mvc.RazorPages.PageModel</code>，
                                                    它具有许多属性，使您能够处理与 HTTP 请求相关的各种项目，例如 HttpContext、Request、Response、ViewData、ModelState 和 TempData。
                                                    它还包括一系列方法，使您能够指定<a href="https://www.learnrazorpages.com/razor-pages/action-results">结果响应的类型</a>，包括另一个 Razor 页面、文件、一些 JSON、字符串或重定向到另一个资源。
                                                </p>
                                                <h2 id="request-processing">请求处理</h2>
                                                <p>
                                                    PageModel 中的请求处理是在类似于 ASP.NET MVC 控制器上的 Action 方法的<a href="./razor-pages-handler-methods.html"> handler 方法</a>中执行的。
                                                    按照惯例，handler 方法选择基于将用于请求的 HTTP 动词与 handler 方法的名称匹配，使用模式 <code>On&lt;verb&gt;</code> 并可选地附加 <code>Async</code> 以表示该方法旨在异步运行。
                                                    GET 请求选择 <code>OnGet</code> 或 <code>OnGetAsync</code> 方法，POST 请求选择 <code>OnPost</code> 或 <code>OnPostAsync</code> 方法。
                                                    如果您想创建一个完全符合 REST 的应用程序，还支持所有其他 HTTP 动词（PUT、DELETE 等）。
                                                </p>
                                                <p>匹配方式只看方法名。 不考虑返回类型和任何参数。 handler 方法的唯一其他规定是它必须是 <code>public</code>。</p>
                                                <p><a href="./razor-pages-handler-methods.html#named-handlers">命名 handler 方法</a>允许您为特定动词指定许多替代方法。 如果您的页面包含多个表单，每个表单都需要执行不同的过程，则您可能希望使用这些。</p>
                                                <h2 id="properties-and-methods">属性和方法 </h2>
                                                <p>
                                                    应用于 PageModel 类的属性和方法在 Razor 页面的 <code>Model</code> 属性中可用。
                                                    属性可以是简单的，如 <code>string</code>、<code>int</code>、<code>DateTime</code> 等，也可以是复杂的类，或组合。
                                                    如果您的页面旨在向数据库添加新产品，则您可能具有以下属性范围：
                                                </p>
<pre><code class="language-csharp">public string Name { get ; set; }
public SelectList Categories { get; set; }
public int CategoryId { get; set; }
</code></pre>
                                                <p>
                                                    您还可以将属性或方法添加到 PageModel 来处理用于显示的格式化值，以最大限度地减少添加到 Razor 页面的代码量。
                                                    以下示例显示了如何使用属性来格式化计算结果：
                                                </p>
<pre><code class="language-csharp">public List&lt;OrderItems&gt; Orders { get; set; }
public string TotalRevenue =&gt; Orders.Sum(o =&gt; o.NetPrice).ToString("f");
</code></pre>
                                                <p>然后，您的 Razor 页面将只需要 <code>@Model.TotalRevenue</code> 将所有销售额的总额显示到小数点后两位，无需在 HTML 中进行 LINQ 计算。</p>
                                                <p>
                                                    您添加到 PageModel 的属性还使您能够以强类型方式开发表单，从而减少运行时错误的可能性。 例如，它们可用于标签和输入标签助手的 for 属性。
                                                    例如，它们可用于<a href="https://www.learnrazorpages.com/razor-pages/tag-helpers/label-tag-helper">标签</a>和<a href="https://www.learnrazorpages.com/razor-pages/tag-helpers/input-tag-helper">输入</a>标签助手的 <code>for</code> 属性。
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-3 right-col">
                                        <div class="alert alert-light" role="alert">
                                            <a href="https://www.learnrazorpages.com/razor-pages/pagemodel">原文地址</a>
                                        </div>
                                        <div id="doc-outline" class="doc-outline well">
                                            <h3 class="doc-outline">快速导航</h3>
                                            <nav class="doc-outline">
                                                <ul>
                                                    <li><a href="#the-razor-pages-pagemodel" class="page-scroll">Razor 页面 PageModel</a></li>
                                                    <li><a href="#controllers" class="page-scroll">控制器 （Controllers）</a></li>
                                                    <li><a href="#view-models" class="page-scroll">视图模型</a></li>
                                                    <li><a href="#default-template" class="page-scroll">默认模板</a></li>
                                                    <li><a href="#request-processing" class="page-scroll">请求处理</a></li>
                                                    <li><a href="#properties-and-methods" class="page-scroll">属性和方法</a></li>
                                                </ul>
                                            </nav>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /ListContent -->
                    </div>
                </div>
                <!-- /List -->
            </div>
        </div>
        <!-- /footer -->
        <footer style="text-align:center;">
            <p>© 2018 - 2021 - Mike Brind. All rights reserved. Contact me at Outlook.com</p>
            <p>更新于: 2021-04-28 10:38:56</p>
        </footer>
    </div>

    <a class="btn-scroll-top" href="#top" data-scroll="">
        <span class="btn-scroll-top-tooltip text-muted font-size-sm mr-2"></span>返回顶部
    </a>

    <script src="./assets/libs/jquery/dist/jquery.min.js"></script>
    <script src="./assets/libs/bootstrap-4.4.1-dist/js/bootstrap.js"></script>
    <script src="./assets/libs/bootstrap-4.4.1-dist/js/bootstrap.bundle.js"></script>
    <script src="./assets/theme.js"></script>
</body>
</html>